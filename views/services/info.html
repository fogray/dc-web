---
layout: home
title: Service
---
<!-- page title -->
<div class="row">
  <div class="col-md-12">
    <div class="page-header">
      <h3>应用 / <small name="service_name"></small></h3>
    </div>
    <div class="pull-right">
      <div class="noUiSlider slider-step pull-left" id="slider-step" style="width: 200px;"></div>
      <button class="btn btn-default btn-link pull-left" type="button" id="btnScale">Scale</button>
    </div>
  </div>
</div>
<div class="row" id="app-service-info">
	<div class="col-md-3">
		<div class="app-icon" v-text="service.name.subtring(service.name.indexOf('__'))"></div>
	</div>
	<div class="col-md-9">
		<div class="row">
			<div class="col-md-4">
				<div class="row">
					<div class="app-name col-md-12" v-text="service.name.subtring(service.name.indexOf('__'))"></div>
				</div>
				<div class="row">
					<div class="col-md-12" v-text="service.updatedAt"></div>
				</div>
				<div class="row">
					<div class="col-md-12 service-action">
						<a class="btn btn-success btn-start">启动</a>
						<a class="btn btn-warning btn-stop">停止</a>
						<a class="btn btn-danger btn-remove">删除</a>
					</div>
				</div>
			</div>
			
			<div class="col-md-8">
				<div class="row">
					<div class="col-md-2">状态:</div>
					<div class="col-md-4" v-text="service.status"></div>
					<div class="col-md-2">使用镜像:</div>
					<div class="col-md-4" v-text="service.image"></div>
				</div>
				<div class="row">
					<div class="col-md-2">访问地址:</div>
					<div class="col-md-10">
						<a v-bind:target="'_' + service.name" v-bind:href="'https://'+service.name+'.service.imaicloud.com'" v-text = "'https://' + service.name +'.service.imaicloud.com'"></a>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="row">
  <div class="col-md-12 tabbable-line">
    <ul class="nav nav-tabs">
      <li class="active"><a data-toggle="tab" href="#tab-general">配置</a></li>
      <li><a data-toggle="tab" href="#tab-logs">日志</a></li>
      <li><a data-toggle="tab" href="#tab-monitor">监控</a></li>
    </ul>
    <div class="tab-content">
     <div class="tab-pane active" id="tab-general">
        <!-- 端口 start -->
        <div class="row">
		       <div class="col-md-3 panel-heading">
		         <h3>端口</h3>
		       </div>
		       <div class="col-md-9 panel-body service-info envs">
		         <table class="table light" id="tblPorts">
		         	 <tbody>
		         	 	<tr v-if="ports.length == 0">
		         	 		<td>
		         	 			<input type="number" name="container-port" class="form-control input-no-border" placeholder="容器端口" />
		         	 		</td>
		         	 		<td>
		         	 			<select name="protocolList">
										    <option value="tcp" selected="">TCP</option>
										    <option value="udp">UDP</option>
		         	 			</select>
		         	 		</td>
		         	 		<td>
		         	 			<input type="text" name="host-port" class="form-control input-no-border" placeholder="主机端口" value="对外服务" disabled="true" />
		         	 		</td>
		         	 		<td><span class="glyphicon glyphicon-trash"></span></td>
		     	 			</tr>
		         	 	<tr v-for="port in ports">
		         	 		<td>
		         	 			<input type="number" name="container-port" class="form-control input-no-border" :value="port.TargetPort" placeholder="容器端口" />
		         	 		</td>
		         	 		<td>
		         	 			<select name="protocolList">
										    <option value="tcp" :selected="port.Protocol=='tcp'">TCP</option>
										    <option value="udp" :selected="port.Protocol=='udp'">UDP</option>
		         	 			</select>
		         	 		</td>
		         	 		<td>
		         	 			<input type="text" name="host-port" class="form-control input-no-border" placeholder="主机端口" value="对外服务" disabled="true" />
		         	 		</td>
		         	 		<td><span class="glyphicon glyphicon-trash"></span></td>
		         	 	</tr>
		         	 </tbody>
		         </table>
		         <div class="col-md-12">
		         	<a class="btn btn-default col-md-12" v-on:click="addPort">添加</a>
		         </div>
		       </div>
        </div>
        <!-- 端口 end -->
        
        <!-- 挂载卷 start -->
        <div class="row">
           <div class="col-md-3panel-heading">
             <h3>挂载卷</h3>
           </div>
           <div class="col-md-9 panel-body service-info volumes">
             <table class="table light" id="tblVolumes">
             	 <tbody>
             	 	<tr v-if="volumes.length == 0">
             	 		<td>
             	 			<input type="text" name="container-path" class="form-control input-no-border" placeholder="容器目录" />
             	 		</td>
             	 		<td>
             	 			<input type="text" name="host-path" class="form-control input-no-border" placeholder="主机目录" />
             	 		</td>
             	 		<td><span class="glyphicon glyphicon-trash"></span></td>
         	 			</tr>
             	 	<tr v-for="volume in volumes">
             	 		<td>
             	 			<input type="text" name="container-path" class="form-control input-no-border" :value="volume.Source" />
             	 		</td>
             	 		<td>
             	 			<input type="text" name="container-path" class="form-control input-no-border" :value="volume.Target" />
             	 		</td>
             	 		<td><span class="glyphicon glyphicon-trash"></span></td>
             	 	</tr>
             	 </tbody>
             </table>
             <div class="col-md-12">
             	<a class="btn btn-default col-md-12" v-on:click="addVolume">添加</a>
             </div>
           </div>
        </div>
        <!-- 挂载卷 end -->
        
        <!-- 容器 start -->
        <div class="row">
          <div class="col-md-3">
            <h3>容器</h3>
          </div>
          <div class="col-md-9 panel-body service-info containers" id="containers">
            <div class="col-md-6 item" v-for="container in containers" :data-id="container.Id" :data-nid="container.NodeID">
						  <div class="col-md-6 item-title" :title="container.Name" v-text="container.Name.substring(cn.indexOf('__')+2)"></div>
							<div :class="['col-md-2', 'item-state', container.State]" v-text="container.State"></div>
							<div class="col-md-4 item-date" v-text="container.Status"></div>
						</div>
          </div>
        </div>
        <!-- 容器 end -->
        
        <!-- 环境变量 start -->
        <div class="row">
           <div class="col-md-3 panel-heading">
             <h3>环境变量</h3>
           </div>
           <div class="col-md-9 panel-body service-info envs">
             <table class="table light" id="tblEnvs">
             	 <tbody>
             	 	<tr v-if="envs.length == 0">
             	 	 	 <td>
             	 	 	 	 <input type="text" class="form-control input-no-border" name="envName" placeholder="键" />
             	 	 	 </td>
             	 	 	 <td>
             	 	 	 	 <input type="text" class="form-control input-no-border" name="envValue" placeholder="值" />
             	 	 	 </td>
             	 	 	 <td><span class="glyphicon glyphicon-trash"></span></td>
             	 	</tr>
             	 	 <tr v-for="env in envs">
             	 	 	 <td>
             	 	 	 	 <input type="text" class="form-control input-no-border" name="envName" 
             	 	 	 				  placeholder="键" :value="env.split('=')[0]" />
             	 	 	 </td>
             	 	 	 <td>
             	 	 	 	 <input type="text" class="form-control input-no-border" name="envValue" 
             	 	 	 				  placeholder="值" :value="env.split('=')[1]" />
             	 	 	 </td>
             	 	 	 <td><span class="glyphicon glyphicon-trash"></span></td>
             	 	 </tr>
             	 </tbody>
             </table>
             <div class="col-md-12">
             	<a class="btn btn-default col-md-12" v-on:click="addEnv">添加</a>
             </div>
           </div>
        </div>
        <!-- 环境变量  end -->
      </div>
      <div class="tab-pane" id="tab-logs">
      </div>
      <div class="tab-pane" id="tab-monitor">
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/dc-web/skins/js/docker/api/service.js"></script>
<script type="text/javascript" src="info.js"></script>
